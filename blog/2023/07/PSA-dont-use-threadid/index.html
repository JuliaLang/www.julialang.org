<!doctype html>
<html lang="en">
<head>
	<!-- parts for all pages -->
	<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="author" content="Jeff Bezanson, Stefan Karpinski, Viral Shah, Alan Edelman, et al.">
<meta name="description" content="The official website for the Julia Language. Julia is a language that is fast, dynamic, easy to use, and open source. Click here to learn more.">
<meta name="robots" content="max-image-preview:large">
<meta name="twitter:site:id" content="1237720952"> <!-- @JuliaLanguage -->
<meta name="google-site-verification" content="9VDSjBtchQj6PQYIVwugTPY7pVCfLYgvkXiRHjc_Bzw" /> <!-- Google News Feed -->


	<link rel="icon" href="/assets/infra/julia.ico">

  <!-- Franklin stylesheets for generated pages -->
  
   <link rel="stylesheet" href="/libs/highlight/github.min.css">
  

	<!-- NOTE: specific stylesheets -->
<link rel="stylesheet" href="/libs/bootstrap/bootstrap.min.css">
<link rel="stylesheet" href="/css/app.css">
<link rel="stylesheet" href="/css/franklin.css">
<link rel="stylesheet" href="/css/fonts.css">
<link href="https://fonts.googleapis.com/css?family=Roboto:400,400i,500,500i,700,700i" rel="stylesheet">
<link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script async defer src="/libs/buttons.js"></script>
<script src="/libs/clipboard.min.js"></script>
<script src="/libs/detectdark.js"></script>


<script defer data-domain="julialang.org" src="https://plausible.io/js/script.js"></script>

<!-- scripts for map rendering -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
crossorigin=""/>

<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
 integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
 crossorigin=""></script>

<!-- https://github.com/Leaflet/Leaflet.markercluster -->
<script src="https://cdn.jsdelivr.net/npm/leaflet.markercluster@1.4.1/dist/leaflet.markercluster-src.min.js"></script>

<script src="https://kit.fontawesome.com/f030d443fe.js" crossorigin="anonymous"></script>


   <title>PSA: Thread-local state is no longer recommended</title>   

  
  <style>
	  .container ul li p {margin-bottom: 0;}
		.container ol li p {margin-bottom: 0;}
		.container ul ul {margin: .4em 0 .4em 0;}
		.container ul ol {margin: .4em 0 .4em 0;}
		.container ol ul {margin: .4em 0 .4em 0;}
		.container ol ol {margin: .4em 0 .4em 0;}
  </style>
  

  <!-- Specific style for blog pages (except the /blob/index) -->
  
  <style>
    .main { font-family: Georgia; }
    .main pre {
  	  margin-left: auto;
  	  margin-right: auto;
    }
    .main { width: 100%; font-size: 100%; }
    .main code { font-size: 90%; }
    .main pre code { font-size: 90%; }
    @media (min-width: 940px) {
      .main { width: 800px; }
      .container.blog-title { width: 800px;}
    }
  </style>
  

  <!-- OGP Metadata -->
	<meta property="og:title" content="PSA: Thread-local state is no longer recommended">
<meta property="og:description" content="PSA: Thread-local state is no longer recommended; Common misconceptions about threadid() and nthreads()">
<meta property="og:image" content="/assets/images/julia-open-graph.png">


</head>

<body>

<div class="container py-3 py-lg-0">
  <nav class="navbar navbar-expand-lg navbar-light bg-light" id="main-menu">
    <!-- LOGO -->
    <a class="navbar-brand" href="/">
      <img class="julialogo" src="/assets/infra/logo.svg" alt="JuliaLang Logo">
    </a>

    <button class="navbar-toggler ml-auto hidden-sm-up float-xs-left" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

      <!-- MENU: DOWNLOAD | DOCUMENTATION | BLOG ... -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mx-auto">
        <li class="nav-item   flex-md-fill text-md-center">
          <a class="nav-link" href="/downloads/">Download</a>
        </li>
        <li class="nav-item flex-md-fill text-md-center">
          <a class="nav-link" href="https://docs.julialang.org">Documentation</a>
        </li>
        <li class="nav-item   flex-md-fill text-md-center">
          <a class="nav-link" href="/learning/">Learn</a>
        </li>
        <li class="nav-item active flex-md-fill text-md-center">
          <a class="nav-link" href="/blog/">Blog</a>
        </li>
        <li class="nav-item   flex-md-fill text-md-center">
          <a class="nav-link" href="/community/">Community</a>
        </li>
        <li class="nav-item   flex-md-fill text-md-center">
          <a class="nav-link" href="/contribute/">Contribute</a>
        </li>
        <li class="nav-item   flex-md-fill text-md-center">
          <a class="nav-link" href="/jsoc/">JSoC</a>
        </li>
      </ul>
      <span class="navbar-right">
        <a class="github-button" href="https://github.com/JuliaLang/julia" data-size="large" data-show-count="true" aria-label="Star JuliaLang/julia on GitHub">Star</a>
        <a class="github-button" href="https://github.com/sponsors/julialang" data-icon="octicon-heart" data-size="large" aria-label="Sponsor @julialang on GitHub">Sponsor</a>
      </span>
    </div>

  </nav>
</div>


<br><br>


<div class="container blog-title">
  <h1>PSA: Thread-local state is no longer recommended
    <a type="application/rss+xml" href="https://julialang.org/feed.xml">
      <i class="fa fa-rss-square rss-icon"></i>
    </a>
  </h1>
  <h3>
   <span style="font-weight: lighter;"> 06 July 2023 </span>
	|
	
	 <span style="font-weight: bold;"></span> 
  <!-- assumption that only one of the two is defined -->
   <span style="font-weight: bold;">Mason Protter, Valentin Churavy, Ian Butterworth, and many helpful contributors </span> 
  </h3>
</div>



<a href="https://github.com/JuliaLang/www.julialang.org/blob/master/blog/2023/07/PSA-dont-use-threadid.md" title="Edit this page on GitHub" class="edit-float">
</a>


<!-- Content appended here -->
<div class="container main">
<p><em>Common misconceptions about threadid&#40;&#41; and nthreads&#40;&#41;</em></p>
<div class="franklin-toc"><ol><li><a href="#the_buggy_pattern">The buggy pattern</a></li><li><a href="#fixing_buggy_code_which_uses_this_pattern">Fixing buggy code which uses this pattern</a><ol><li><a href="#quickfix_replace_threads_with_threads_static">Quickfix: Replace <code>@threads</code> with <code>@threads :static</code></a></li><li><a href="#better_fix_work_directly_with_tasks">Better fix: Work directly with tasks</a></li><li><a href="#another_option_use_a_package_which_handles_this_correctly">Another option: Use a package which handles this correctly</a></li></ol></li></ol></div>
<h2 id="the_buggy_pattern"><a href="#the_buggy_pattern" class="header-anchor">The buggy pattern</a></h2>
<p>Partially due to the evolving history of our parallel and concurrent interfaces<sup id="fnref:historynote"><a href="#fndef:historynote" class="fnref">[1]</a></sup>, some Julia programmers have been writing <em>incorrect</em> parallel code that contains the possibility of race conditions which can give wrong results. This pattern has even been erroneously recommended in <a href="/blog/2019/07/multithreading/#thread-local_state">previous official julia blogposts</a>. It is important for the stability and correctness of the ecosystem that these usages are identified and fixed.</p>
<p>The general template that this incorrect code follows is something like the following:</p>
<pre><code class="julia hljs"><span class="hljs-keyword">using</span> Base.Threads: nthreads, <span class="hljs-meta">@threads</span>, threadid

states = [some_initial_value <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>:nthreads()]
<span class="hljs-meta">@threads</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> some_data
    tid = threadid()
    old_val = states[tid]
    new_val = some_operator(old_val, f(x))
    states[tid] = new_val
<span class="hljs-keyword">end</span>
do_something(states)</code></pre>
<p>The above code is <strong>incorrect</strong> because the tasks spawned by <code>@threads</code> are  allowed to yield to other tasks during their execution<sup id="fnref:yielding"><a href="#fndef:yielding" class="fnref">[2]</a></sup>. This means that between reading <code>old_val</code> and storing <code>new_val</code> in the storage, the task could be paused and a new task running on the same thread with the same <code>threadid&#40;&#41;</code> could concurrently write to <code>states&#91;tid&#93;</code>, causing a race condition and thus work being lost.</p>
<p>This is not actually a problem with multithreading specifically, but really a concurrency problem, and it can be demonstrated even with a single thread. For example:</p>
<pre><code class="julia hljs">$ julia --threads=<span class="hljs-number">1</span></code></pre>
<pre><code class="julia hljs">julia&gt; f(i) = (sleep(<span class="hljs-number">0.001</span>); i);

julia&gt; <span class="hljs-keyword">let</span> state = [<span class="hljs-number">0</span>], N=<span class="hljs-number">100</span>
           <span class="hljs-meta">@sync</span> <span class="hljs-keyword">for</span> i ∈ <span class="hljs-number">1</span>:N
               Threads.<span class="hljs-meta">@spawn</span> <span class="hljs-keyword">begin</span>
                   tid = Threads.threadid()  <span class="hljs-comment"># Each task gets `tid = 1`.</span>
                   old_var = state[tid]      <span class="hljs-comment"># Each task reads the current value, which for</span>
                                             <span class="hljs-comment"># all is 0 (!) because...</span>
                   new_var = old_var + f(i)  <span class="hljs-comment"># ...the `sleep` in `f` causes all tasks to pause</span>
                                             <span class="hljs-comment"># *simultaneously* here (all loop iterations start,</span>
                                             <span class="hljs-comment"># but do not yet finish).</span>
                   state[tid] = new_var      <span class="hljs-comment"># After being released from the `sleep`, each task</span>
                                             <span class="hljs-comment"># sets `state[1]` to `i`.</span>
               <span class="hljs-keyword">end</span>
           <span class="hljs-keyword">end</span>
           sum(state), sum(<span class="hljs-number">1</span>:N)
       <span class="hljs-keyword">end</span>
(<span class="hljs-number">100</span>, <span class="hljs-number">5050</span>)</code></pre>
<p>In the above snippet, we purposefully over-subscribed the CPU with <code>100</code> separate tasks in order to make the bug more likely to manifest, but the problem <strong>can</strong> arise even without spawning very many tasks.</p>
<p>Any usage of <code>threadid&#40;&#41;</code> in package or user code should be seen as a warning sign that the code is relying on implementation details, and is open to concurrency bugs.</p>
<h2 id="fixing_buggy_code_which_uses_this_pattern"><a href="#fixing_buggy_code_which_uses_this_pattern" class="header-anchor">Fixing buggy code which uses this pattern</a></h2>
<h3 id="quickfix_replace_threads_with_threads_static"><a href="#quickfix_replace_threads_with_threads_static" class="header-anchor">Quickfix: Replace <code>@threads</code> with <code>@threads :static</code></a></h3>
<p>The simplest &#40;though not recommended longterm&#41; quickfix if you happen to use <code>@threads</code> is to replace usages of <code>@threads for ...</code> with <code>@threads :static for ...</code>. The reason for this is that the <code>:static</code> scheduler for <code>@threads</code> does not allow the asynchronous task migration and yielding that causes the bug in the first place.</p>
<p>However, this is not a good long term solution because</p>
<ol>
<li><p>It&#39;s relying on non-obvious implicit guard rails to prevent otherwise incorrect code to be correct</p>
</li>
<li><p><code>@threads :static</code> is not cooperative or composable, that means that if code inside your <code>@threads :static</code> loop also does multithreading, your code could be reduced to worse than single-threaded speeds, or even deadlock.</p>
</li>
</ol>
<h3 id="better_fix_work_directly_with_tasks"><a href="#better_fix_work_directly_with_tasks" class="header-anchor">Better fix: Work directly with tasks</a></h3>
<p>If you want a recipe that can replace the above buggy one with something that can be written using only the <code>Base.Threads</code> module, we recommend moving away from <code>@threads</code>, and instead working directly with <code>@spawn</code> to create and manage tasks. The reason is that <code>@threads</code> does not have any builtin mechanisms for managing and merging the results of work from different threads, whereas tasks can manage and return their own state in a safe way.</p>
<p>Tasks creating and returning their own state is inherently safer than the spawner of parallel tasks setting up state for spawned tasks to read from and write to.</p>
<p>Code which replaces the incorrect code pattern shown above can look like this:</p>
<pre><code class="julia hljs"><span class="hljs-keyword">using</span> Base.Threads: nthreads, <span class="hljs-meta">@threads</span>, <span class="hljs-meta">@spawn</span>
<span class="hljs-keyword">using</span> Base.Iterators: partition

tasks_per_thread = <span class="hljs-number">2</span> <span class="hljs-comment"># customize this as needed. More tasks have more overhead, but better</span>
                     <span class="hljs-comment"># load balancing</span>

chunk_size = max(<span class="hljs-number">1</span>, length(some_data) ÷ (tasks_per_thread * nthreads()))
data_chunks = partition(some_data, chunk_size) <span class="hljs-comment"># partition your data into chunks that</span>
                                               <span class="hljs-comment"># individual tasks will deal with</span>
<span class="hljs-comment">#See also ChunkSplitters.jl and SplittablesBase.jl for partitioning data</span>

tasks = map(data_chunks) <span class="hljs-keyword">do</span> chunk
    <span class="hljs-comment"># Each chunk of your data gets its own spawned task that does its own local, sequential work</span>
    <span class="hljs-comment"># and then returns the result</span>
    <span class="hljs-meta">@spawn</span> <span class="hljs-keyword">begin</span>
        state = some_initial_value
        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> chunk
            state = some_operator(state, f(x))
        <span class="hljs-keyword">end</span>
        <span class="hljs-keyword">return</span> state
    <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
states = fetch.(tasks) <span class="hljs-comment"># get all the values returned by the individual tasks. fetch is type</span>
                       <span class="hljs-comment"># unstable, so you may optionally want to assert a specific return type.</span>

do_something(states)</code></pre>
<p>This is a fully general replacement for the old, buggy pattern. However, for many applications this should be simplified down to a parallel version of <code>mapreduce</code>:</p>
<pre><code class="julia hljs"><span class="hljs-keyword">using</span> Base.Threads: nthreads, <span class="hljs-meta">@spawn</span>
<span class="hljs-keyword">function</span> tmapreduce(f, op, itr; tasks_per_thread::<span class="hljs-built_in">Int</span> = <span class="hljs-number">2</span>, kwargs...)
    chunk_size = max(<span class="hljs-number">1</span>, length(itr) ÷ (tasks_per_thread * nthreads()))
    tasks = map(Iterators.partition(itr, chunk_size)) <span class="hljs-keyword">do</span> chunk
        <span class="hljs-meta">@spawn</span> mapreduce(f, op, chunk; kwargs...)
    <span class="hljs-keyword">end</span>
    mapreduce(fetch, op, tasks; kwargs...)
<span class="hljs-keyword">end</span></code></pre>
<p>In <code>tmapreduce&#40;f, op, itr&#41;</code>, the function <code>f</code> is applied to each element of <code>itr</code>, and then an <em>associative</em><sup id="fnref:assoc"><a href="#fndef:assoc" class="fnref">[3]</a></sup> two-argument function <code>op</code>.</p>
<p>The above <code>tmapreduce</code> can hopefully be added to base Julia at some point in the near future. In the meantime however it&#39;s somewhat simple to write your own as above.</p>
<h3 id="another_option_use_a_package_which_handles_this_correctly"><a href="#another_option_use_a_package_which_handles_this_correctly" class="header-anchor">Another option: Use a package which handles this correctly</a></h3>
<p>We encourage people to check out various multithreading libraries like <a href="https://github.com/JuliaFolds2/Transducers.jl">Transducers.jl</a> &#40;or various frontends like <a href="https://github.com/tkf/ThreadsX.jl">ThreadsX.jl</a>, <a href="https://github.com/JuliaFolds/FLoops.jl">FLoops.jl</a>, and <a href="https://github.com/JuliaFolds/Folds.jl">Folds.jl</a>&#41;,  and <a href="https://github.com/JuliaConcurrent/MultiThreadedCaches.jl">MultiThreadedCaches.jl</a>.</p>
<h4 id="transducersjl_ecosystem"><a href="#transducersjl_ecosystem" class="header-anchor">Transducers.jl ecosystem</a></h4>
<p>Transducers.jl is fundamentally about expressing the traversing of data in a structured and principled way, often with the benefit that it makes parallel computing easier to reason about.</p>
<p>The above <code>tmapreduce&#40;f, op, itr&#41;</code> could be expressed as</p>
<pre><code class="julia hljs"><span class="hljs-keyword">using</span> Transducers
itr |&gt; Map(f) |&gt; foldxt(op; init=some_initial_value)</code></pre>
<p>or</p>
<pre><code class="julia hljs"><span class="hljs-keyword">using</span> Transducers
foldxt(op, Map(f), itr; init=some_initial_value)</code></pre>
<p>The various frontends listed provide different APIs for Transducers.jl which some people may find easier to use. E.g.</p>
<pre><code class="julia hljs"><span class="hljs-keyword">using</span> ThreadsX
ThreasdX.mapreduce(f, op, itr; init=some_initial_value)</code></pre>
<p>or</p>
<pre><code class="julia hljs"><span class="hljs-keyword">using</span> FLoops
<span class="hljs-meta">@floop</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> itr
    <span class="hljs-meta">@reduce</span> out = op(some_initial_value, f(x))
<span class="hljs-keyword">end</span>
out</code></pre>
<h4 id="multithreadedcachesjl"><a href="#multithreadedcachesjl" class="header-anchor">MultiThreadedCaches.jl</a></h4>
<p>MultiThreadedCaches.jl on the other hand attempts to make the <code>states&#91;threadid&#40;&#41;&#93;</code>-like pattern safer by using lock mechanisms to stop data races. We think this is not an ideal way to proceed, but it may make transitioning to safer code easier and require fewer rewrites, such as in cases where a package must manage state which may be concurrently written to by a user, and the package cannot control how the user structures their code.</p>

<style>
.fndef {
    width: 100%;
    margin-bottom: 0;
    border: none;
}
.fndef-backref {
    width: 2em;
}
.long-footnote {
    width: 100%;
    background-color: var(--light);
    padding: 0.75rem;
}
</style>

<table class="fndef" id="fndef:historynote">
    <tr>
        <td class="fndef-backref"><a href="#fnref:historynote">[1]</a></td>
        <td class="fndef-content"><h4>Concurrency &amp; Parallelism</h4></td>
    </tr>
</table>

<div class="long-footnote"><p>In Julia, tasks are the primitive mechanism to express concurrency. Concurrency is the ability to execute more than one program or task simultaneously.</p>
<p>Tasks will be mapped onto any number of &quot;worker-threads&quot; that will lead them to be executed in parallel. This is often called <code>M:N</code> threading or green threads. Even if Julia is started with only one worker-thread, the programmer can express concurrent operations.</p>
<p>In early versions of Julia, the <code>@async</code> macro was used to schedule concurrent tasks which were executed asynchronously on a single thread. Later, the <code>@threads</code> macro was developed for CPU-parallelism and allowed users to easily execute chunks of a loop in parallel, but at the time this was disjoint from the notions of tasks in the language. This lead to various composability problems and motivated language changes.</p>
<p>The concurrency model in Julia has been evolving over minor versions. Julia v1.3 introduced the parallel scheduler for tasks and <code>Threads.@spawn</code>; v1.5 introduced <code>@threads :static</code> with the intention to change the default scheduling in future releases. Julia v1.7 enabled task migration, and Julia v1.8 changed the default for <code>@threads</code> to the dynamic scheduler.</p>
<p>When the parallel scheduler was introduced, we decided that there was too much code in the wild using <code>@async</code> and expecting specific semantics, so <code>Threads.@spawn</code> was made available to access the new semantics. <code>@async</code> has various problems and we discourage its use for new code.</p>
<h4>
<p>Uses of <code>threadid</code>/<code>nthreads</code>/<code>maxthreadid</code> </h4></p>
<p>Over time, several features have been added that make relying on <code>threadid</code>, <code>nthreads</code> and even <code>maxthreadid</code> perilous:</p>
<ol>
<li><p>Task migration: A task can observe multiple <code>threadid</code>s during its execution.</p>
</li>
<li><p>Interactive priority: <code>nthreads&#40;&#41;</code> will report the number of non-interactive worker-threads, thus undercounting the number of active threads.</p>
</li>
<li><p>Thread adoption &#40;v1.9&#41;: Foreign threads can now be adopted &#40;and later be removed&#41; at any time during the execution of the program.</p>
</li>
<li><p>GC threads: The runtime can use additional threads to accelerate work like executing the Garbage Collector.</p>
</li>
</ol>
<p>Any code that relies on a specific <code>threadid</code> staying constant, or on a constant number of threads during execution, is bound to be incorrect. As a rule of thumb, programmers should at most be querying the number of threads to motivate heuristics like how to distribute parallel work, but programs should generally <strong>not</strong> be written to depend on implementation details of threads for correctness. Rather, programmers should reason about <em>tasks</em>, i.e. pieces of work that may execute concurrently with other code, independently of the number of <em>threads</em> that are used for executing them.</p></div>
<br/>
<table class="fndef" id="fndef:yielding">
    <tr>
        <td class="fndef-backref"><a href="#fnref:yielding">[2]</a></td>
        <td class="fndef-content"><h4>Don&#39;t try to reason about yielding</h4></td>
    </tr>
</table>

<div class="long-footnote"><p>Many existing uses of thread local state happen to be relatively robust and give correct answers only because the functions they are calling during execution do not yield. One may then think &quot;well, I can just avoid this problem by making sure my code doesn&#39;t yield&quot;, but we think this is a bad and unsustainable idea, because whether or not a function call will yield is not stable, obvious, or easily inspectable.</p>
<p>For instance, if a function <code>f</code> is updated to include a background <code>@debug</code> statement or other forms of non-user-visible IO, it may change from being non-yielding to yielding. If during a call to <code>f</code>, the compiler encounters a dynamic dispatch where new code must be JIT compiled, a yield-point may be encountered, and any number of other internal changes could happen to code which can cause it to yield.</p>
<p>Furthermore, future versions of julia may eventually move away from a <a href="https://en.wikipedia.org/wiki/Cooperative_multitasking">cooperative task model</a> to a <a href="https://en.wikipedia.org/wiki/Preemption_&#40;computing&#41;">preemptive task model</a>, in which case yield points would not be the only way that race conditions like this could be encountered.</p></div>
<br/>
<table class="fndef" id="fndef:assoc">
    <tr>
        <td class="fndef-backref"><a href="#fnref:assoc">[3]</a></td>
        <td class="fndef-content"><h4>Associativity</h4></td>
    </tr>
</table>

<div class="long-footnote"><p><a href="https://en.wikipedia.org/wiki/Associative_property">Associativity</a> is an important property for parallel reducing functions, because it means that <code>op&#40;a, op&#40;b, c&#41;&#41; &#61;&#61; op&#40;op&#40;a, b&#41;, c&#41;</code>, and hence the result does not depend on the order in which the reduction is performed.</p>
<p>Note that associativity is not the same as commutativity, which is the property that <code>op&#40;a, b&#41; &#61;&#61; op&#40;b, a&#41;</code>. This is <em>not</em> required for parallel reducing functions.</p></div>
</div><br><br>

<!-- CONTENT ENDS HERE -->
    
    
        <script src="/libs/highlight/highlight.min.js"></script>


    

    <!-- http://tutsplus.github.io/clipboard/ -->

<script>
(function(){

	// Get the elements.
	// - the 'pre' element.
	// - the 'div' with the 'paste-content' id.

	var pre = document.getElementsByTagName('pre');

	// Add a copy button in the 'pre' element.
	// which only has the className of 'language-' or ' hljs'(if enable highlight.js pre-render).

	for (var i = 0; i < pre.length; i++) {
		var tag_name = pre[i].children[0].className
            	var isLanguage = tag_name.startsWith('language-') || tag_name.endsWith(' hljs');
		if ( isLanguage ) {
			var button           = document.createElement('button');
					button.className = 'copy-button';
					button.textContent = 'Copy';

					pre[i].appendChild(button);
		}
	};

	// Run Clipboard

	var copyCode = new Clipboard('.copy-button', {
		target: function(trigger) {
			return trigger.previousElementSibling;
    }
	});

	// On success:
	// - Change the "Copy" text to "Copied".
	// - Swap it to "Copy" in 2s.
	// - Lead user to the "contenteditable" area with Velocity scroll.

	copyCode.on('success', function(event) {
		event.clearSelection();
		event.trigger.textContent = 'Copied';
		window.setTimeout(function() {
			event.trigger.textContent = 'Copy';
		}, 2000);

	});

	// On error (Safari):
	// - Change the  "Press Ctrl+C to copy"
	// - Swap it to "Copy" in 2s.

	copyCode.on('error', function(event) {
		event.trigger.textContent = 'Press "Ctrl + C" to copy';
		window.setTimeout(function() {
			event.trigger.textContent = 'Copy';
		}, 5000);
	});

})();
</script>


    <footer class="container-fluid footer-copy">
  <div class="container">
    <div class="row footrow">
      <ul>
        <li><a href="/project">About</a></li>
        <li><a href="/about/help">Get Help</a></li>
        <li><a href="/governance/">Governance</a></li>
        <li><a href="/research/#publications">Publications</a></li>
        <li><a href="/research/#sponsors">Sponsors</a></li>
      </ul>
      <ul>
        <li><a href="/downloads/">Downloads</a></li>
        <li><a href="/downloads/">All Releases</a></li>
        <li><a href="https://github.com/JuliaLang/julia">Source Code</a></li>
        <li><a href="/downloads/#current_stable_release">Current Stable Release</a></li>
        <li><a href="/downloads/#long_term_support_release">Longterm Support Release</a></li>
      </ul>
      <ul>
        <li><a href="https://docs.julialang.org/en/v1/">Documentation</a></li>
        <li><a href="https://juliaacademy.com">JuliaAcademy</a></li>
        <li><a href="https://www.youtube.com/user/JuliaLanguage">YouTube</a></li>
        <li><a href="/learning/getting-started/">Getting Started</a></li>
        <li><a href="https://docs.julialang.org/en/v1/manual/faq/">FAQ</a></li>
        <li><a href="/learning/books">Books</a></li>
      </ul>
      <ul>
        <li><a href="/community/">Community</a></li>
        <li><a href="/community/standards/">Code of Conduct</a></li>
        <li><a href="/community/stewards/">Stewards</a></li>
        <li><a href="/diversity/">Diversity</a></li>
        <li><a href="https://juliagenderinclusive.github.io">Julia Gender Inclusive</a></li>
        <li><a href="https://juliacon.org">JuliaCon</a></li>
        <li><a href="/community/#julia_user_and_developer_survey">User/Developer Survey</a></li>
        <li><a href="/shop/">Shop Merchandise</a></li>
      </ul>
      <ul>
        <li><a href="https://github.com/JuliaLang/julia/blob/master/CONTRIBUTING.md">Contributing</a></li>
        <li><a href="/contribute">Contributor's Guide</a></li>
        <li><a href="https://github.com/JuliaLang/julia/issues">Issue Tracker</a></li>
        <li><a href="https://github.com/JuliaLang/julia/security/policy">Report a Security Issue</a></li>
        <li><a href="https://github.com/search?q=is%3Aopen+is%3Aissue+language%3AJulia+label%3A%22help+wanted%22">Help Wanted Issues</a></li>
        <li><a href="https://github.com/search?q=is%3Aopen+is%3Aissue+language%3AJulia+label%3A%22good+first+issue%22">Good First Issue</a></li>
        <li><a href="https://docs.julialang.org/en/v1/devdocs/init/">Dev Docs</a></li>
      </ul>
    </div>
    <div id="footer-bottom" class="row">
      <div class="col-md-10 py-2">
        <p>Last modified: October 20, 2024. This site is powered by <a href="https://www.netlify.com">Netlify</a>, <a href="https://franklinjl.org">Franklin.jl</a>, and the <a href="https://julialang.org">Julia Programming Language</a>.</p>
        <p>We thank <a href="https://www.fastly.com">Fastly</a> for their generous infrastructure support.</p>
        <p>©2024 JuliaLang.org <a href="https://github.com/JuliaLang/www.julialang.org/graphs/contributors">contributors</a>. The content on this website is made available under the <a href="https://github.com/JuliaLang/www.julialang.org/blob/master/LICENSE.md">MIT license</a>.</p>
      </div>
      <div class="col-md-2 py-2">
        <span class="float-sm-right">
          <a class="github-button" href="https://github.com/sponsors/julialang" data-icon="octicon-heart" data-size="large" aria-label="Sponsor @julialang on GitHub">Sponsor</a>
        </span>
      </div>
    </div>
  </div>
</footer>

<script src="/libs/jquery/jquery.min.js"></script>
<script src="/libs/bootstrap/bootstrap.min.js"></script>
<!-- <script src="/libs/highlight/highlight.min.js"></script> -->
<!--  -->

    <script src="/libs/groups.js"></script>
    <script src="/libs/map.js"></script>
  </body>
</html>
